<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>DictionMap</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
</head>

<body>
  <div class="header">
    <h1><a href="{{ url_for('index') }}">DictionMap</a></h1>
    <div class="search-container">
      <form method="post">
        <input type="text" name="word" placeholder="Enter a word" {% if last_word %} value="{{ last_word }}" {% endif %}
          required>
        <button type="submit">Search</button>
        <div class="input-container">
          <label for="num_words">Output Size:</label>
          <input type="number" id="num_words" name="num_words" placeholder="Num Words" min="1"
            value="{{ request.form.num_words or 20 }}" required>
          <label for="num_cats">Categories:</label>
          <input type="number" id="num_cats" name="num_cats" placeholder="Num Categories" min="1"
            value="{{ request.form.num_cats or 5 }}" required>
        </div>
      </form>
    </div>
  </div>

  <div class="results">
    {% if similar_words %}

    <div class="column">
      <h2>Similar Words:</h2>
      <div>
        {% for word in similar_words %}
        <span class="word" onclick="submitWord('{{ word }}')">{{ word }}</span>
        {% endfor %}
      </div>
    </div>

    {% endif %}
  </div>

  {% if example_words %}
  <div>
    <div class="welcome">
      <h2>Welcome!</h2>
      <p>
        DictionMap lets you categorise words with fastText word embeddings.
      </p>
      <p>Here are a few
        ideas
        to get you started &ndash; just click a word to begin your journey. Each word in the lists that
        follow
        is another link to further exploration.
      </p>
      <div class="example">
        {% for word in example_words %}
        <span class="word" onclick="submitWord('{{ word }}')">{{ word }}</span>
        {% endfor %}
      </div>
      <p>
        This is an
        open-source
        project
        licensed under the MIT License. Its GitHub repository can be found
        <u><a href="https://github.com/jhelsby/DictionWave">here</a></u>. Many
        thanks for visiting!
      </p>
    </div>
  </div>
  {% endif %}

  <script>
    function submitWord(word) {
      const form = document.createElement('form');
      form.method = 'POST';
      form.action = '/';

      const inputWord = document.createElement('input');
      inputWord.type = 'hidden';
      inputWord.name = 'word';
      inputWord.value = word;

      const inputNumWords = document.getElementById('num_words').value;
      const inputNumCats = document.getElementById('num_cats').value;

      const inputNumWordsField = document.createElement('input');
      inputNumWordsField.type = 'hidden';
      inputNumWordsField.name = 'num_words';
      inputNumWordsField.value = inputNumWords;

      const inputNumCatsField = document.createElement('input');
      inputNumCatsField.type = 'hidden';
      inputNumCatsField.name = 'num_words';
      inputNumCatsField.value = inputNumCats;

      form.appendChild(inputWord);
      form.appendChild(inputNumWordsField);
      form.appendChild(inputNumCatsField);

      document.body.appendChild(form);
      form.submit();
    }
  </script>
</body>

</html>